import{_ as ee}from"./DialogCloseBtn-794368e9.js";import{g as q}from"./auth-6f82e049.js";import{a as k}from"./axios-f66e6075.js";import{a as w,V as ae}from"./VRow-8854109f.js";import{j as u,K as A,a2 as le,r as te,o as _,c as g,n as e,w as a,l as s,Q as p,F as E,a as K,p as n,q as oe,x as P,z as $,E as S,C as c}from"./index-02544f79.js";import{V as R}from"./VDivider-883477ee.js";import{V as D,d as U,b as z,c as se,a as O}from"./VCard-6740f87f.js";import{V as ne}from"./VTextField-2ef22c52.js";import{V as ie}from"./VSelect-8d7f4e6e.js";import{V as Q}from"./VDialog-9c788e32.js";import{V as G}from"./VSpacer-789f9cb5.js";import"./VAvatar-8d8c7504.js";import"./VImg-71aa10cb.js";import"./transition-11e3056b.js";import"./forwardRefs-9d31fcaa.js";import"./VList-2da4db40.js";import"./dialog-transition-2ccf56f1.js";import"./VMenu-d75f87ea.js";import"./VOverlay-311e958b.js";import"./VCheckboxBtn-377a9031.js";const re={class:"flat-card"},ue={class:"d-flex w-full align-center justify-between mb-2"},de=s("div",{class:"v-card-title"}," Categories ",-1),ce=["onClick"],me={class:"d-flex gap-1"},fe={class:"flat-card"},ve={class:"d-flex w-full align-center justify-between mb-2"},pe=s("div",{class:"v-card-title"}," Sub Categories ",-1),_e={class:"d-flex gap-1"},H={__name:"CategoryList",props:{baseUrl:{type:String,required:!0}},setup(L){const C=L,h={value:-1,title:"Main"},m=u([]),V=u([]),y=u(-1),I=u(-1),i=u(!1),f=u(!1),J=A(()=>V.value.filter(o=>o.parent_id==y.value)),B=A(()=>[h,...m.value.map(o=>({value:o.id,title:o.name}))]),b=u(q),v=u(h),W=o=>{y.value=o},N=o=>{o?v.value="Main":v.value=B.value.find(l=>l.value==y.value),b.value=q,i.value=!0},T=o=>{b.value=o,i.value=!0},F=o=>{I.value=o,f.value=!0},M=()=>{i.value=!1},X=()=>{f.value=!1},Y=()=>{const o={...b.value},l=o.id;delete o.id;const r=B.value.find(d=>d.value==v.value);r==null||r.value==-1?delete o.parent_id:o.parent_id=r.value,l==-1?k.post(C.baseUrl,o).then(d=>{const{data:t}=d.data;m.value=t.categories,V.value=t.sub_categories,i.value=!1}):k.put(`${C.baseUrl}/${l}`,o).then(d=>{const{data:t}=d.data;m.value=t.categories,V.value=t.sub_categories,i.value=!1})},Z=()=>{k.delete(`${C.baseUrl}/${I.value}`).then(o=>{const{data:l}=o.data;m.value=l.categories,V.value=l.sub_categories,I.value=-1,f.value=!1})};return le(()=>{k.get(C.baseUrl).then(o=>{const{data:l}=o.data;m.value=l.categories,V.value=l.sub_categories,l.categories.length>0&&(y.value=l.categories[0].id)})}),(o,l)=>{const r=te("IconBtn"),d=ee;return _(),g("div",null,[e(ae,null,{default:a(()=>[e(w,{cols:"12",md:"1"}),e(w,{cols:"6",md:"5"},{default:a(()=>[s("div",re,[s("div",ue,[de,e(p,{size:"small",icon:"tabler-plus",onClick:l[0]||(l[0]=t=>N(!0))})]),e(R),s("div",null,[(_(!0),g(E,null,K(n(m),(t,j)=>(_(),g("div",{key:j,class:"d-flex w-full align-center justify-between mb-2 px-2 py-2"},[s("span",{class:oe(["cursor-pointer",n(y)==t.id?"text-success":""]),onClick:x=>W(t.id)},P(t.name),11,ce),s("div",me,[e(r,{onClick:x=>T(t)},{default:a(()=>[e($,{icon:"mdi-pencil-outline"})]),_:2},1032,["onClick"]),e(r,{onClick:x=>F(t.id)},{default:a(()=>[e($,{icon:"mdi-delete-outline"})]),_:2},1032,["onClick"])])]))),128))])])]),_:1}),e(w,{cols:"6",md:"5"},{default:a(()=>[s("div",fe,[s("div",ve,[pe,e(p,{size:"small",icon:"tabler-plus",onClick:l[1]||(l[1]=t=>N(!1))})]),e(R),s("div",null,[(_(!0),g(E,null,K(n(J),(t,j)=>(_(),g("div",{key:j,class:"d-flex w-full align-center justify-between px-2 py-2"},[s("span",null,P(t.name),1),s("div",_e,[e(r,{onClick:x=>T(t)},{default:a(()=>[e($,{icon:"mdi-pencil-outline"})]),_:2},1032,["onClick"]),e(r,{onClick:x=>F(t.id)},{default:a(()=>[e($,{icon:"mdi-delete-outline"})]),_:2},1032,["onClick"])])]))),128))])])]),_:1}),e(w,{cols:"12",md:"1"})]),_:1}),e(Q,{modelValue:n(i),"onUpdate:modelValue":l[4]||(l[4]=t=>S(i)?i.value=t:null),"max-width":"720"},{default:a(()=>[e(d,{onClick:M}),e(D,{title:"Campaign Category"},{default:a(()=>[e(U,null,{default:a(()=>[e(ne,{class:"mb-4",modelValue:n(b).name,"onUpdate:modelValue":l[2]||(l[2]=t=>n(b).name=t),label:"Category Name"},null,8,["modelValue"]),e(ie,{class:"mb-4",modelValue:n(v),"onUpdate:modelValue":l[3]||(l[3]=t=>S(v)?v.value=t:null),items:n(B),variant:"outlined",label:"Parent Category"},null,8,["modelValue","items"])]),_:1}),e(U,{class:"d-flex justify-end flex-wrap gap-3"},{default:a(()=>[e(p,{variant:"tonal",color:"secondary",onClick:M},{default:a(()=>[c(" Close ")]),_:1}),e(p,{onClick:Y},{default:a(()=>[c(" Save ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Q,{modelValue:n(f),"onUpdate:modelValue":l[5]||(l[5]=t=>S(f)?f.value=t:null),"max-width":"500px"},{default:a(()=>[e(D,null,{default:a(()=>[e(z,{class:"px-8 py-8"},{default:a(()=>[c(" Are you sure you want to delete this category? ")]),_:1}),e(se,null,{default:a(()=>[e(G),e(p,{color:"error",variant:"outlined",onClick:X},{default:a(()=>[c(" Cancel ")]),_:1}),e(p,{color:"success",variant:"elevated",onClick:Z},{default:a(()=>[c(" OK ")]),_:1}),e(G)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},Fe={__name:"index",setup(L){return(C,h)=>(_(),g("div",null,[e(D,null,{default:a(()=>[e(O,null,{default:a(()=>[e(z,null,{default:a(()=>[c("Campaign Categories List")]),_:1})]),_:1}),e(U,null,{default:a(()=>[e(H,{baseUrl:"/admin/campaign-categories"})]),_:1})]),_:1}),e(D,{class:"mt-4"},{default:a(()=>[e(O,null,{default:a(()=>[e(z,null,{default:a(()=>[c("Progress Categories List")]),_:1})]),_:1}),e(U,null,{default:a(()=>[e(H,{baseUrl:"/admin/progress-categories"})]),_:1})]),_:1})]))}};export{Fe as default};
